<div id="milestone-progress" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6">
    <div class="flex items-center justify-between mb-3">
        <div>
            <h3 class="text-sm font-bold text-gray-900">Week {{ week }} Progress</h3>
            <p class="text-xs text-gray-500 mt-0.5">
                {% if achieved_count == total_count and total_count > 0 %}
                All milestones tracked — amazing work!
                {% elif achieved_count > 0 and concern_count == 0 %}
                Keep it up! You're doing great.
                {% elif concern_count > 0 %}
                {{ concern_count }} concern{{ 's' if concern_count != 1 else '' }} flagged — try asking the chat assistant for guidance.
                {% else %}
                Tap the circles to track {{ baby_name or "your baby" }}'s milestones as you notice them.
                {% endif %}
            </p>
        </div>
        <div class="text-right flex-shrink-0 ml-4">
            <p class="text-2xl font-bold text-indigo-600">{{ achieved_count }}<span class="text-sm font-normal text-gray-400">/{{ total_count }}</span></p>
            <p class="text-xs text-gray-400">achieved</p>
        </div>
    </div>
    <!-- Progress bar -->
    <div class="w-full bg-gray-100 rounded-full h-2.5 overflow-hidden flex">
        {% if total_count > 0 %}
        <div class="bg-green-500 h-2.5 rounded-l-full transition-all duration-500" style="width: {{ (achieved_count / total_count * 100)|round(1) }}%"></div>
        <div class="bg-amber-400 h-2.5 transition-all duration-500" style="width: {{ (concern_count / total_count * 100)|round(1) }}%"></div>
        {% endif %}
    </div>
    <div class="flex gap-4 mt-2 text-xs text-gray-500">
        {% if achieved_count > 0 %}
        <span class="flex items-center gap-1">
            <span class="w-2 h-2 rounded-full bg-green-500 inline-block"></span>
            {{ achieved_count }} achieved
        </span>
        {% endif %}
        {% if concern_count > 0 %}
        <span class="flex items-center gap-1">
            <span class="w-2 h-2 rounded-full bg-amber-400 inline-block"></span>
            {{ concern_count }} concern{{ 's' if concern_count != 1 else '' }}
        </span>
        {% endif %}
        {% if untracked_count > 0 %}
        <span class="flex items-center gap-1">
            <span class="w-2 h-2 rounded-full bg-gray-200 inline-block"></span>
            {{ untracked_count }} remaining
        </span>
        {% endif %}
    </div>
</div>
